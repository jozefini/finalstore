---
title: selector()
icon: Parentheses
---

The `selector` method allows you to create reusable selectors that can compute derived state with optional parameters. This is particularly useful when you need to share complex state selections or computations across components.

```tsx
import { createStore } from 'finalstore';

const store = createStore({
  states: {
    todos: [] as { id: number; text: string; completed: boolean }[]
  },
  actions: {
    addTodo: (state, payload: { text: string }) => {
      state.todos.push({
        id: Date.now(),
        text: payload.text,
        completed: false
      });
    }
  },
  selectors: {
    // Selector with parameter
    filteredTodos: (state, completed?: boolean) => {
      if (completed === undefined) return state.todos;
      return state.todos.filter((todo) => todo.completed === completed);
    },
    // Selector without parameter
    totalTodos: (state) => state.todos.length
  }
});
```

## Inside Components (use)

Use the `use` hook with selectors for reactive state in components:

```tsx
function TodoList({ showCompleted }: { showCompleted: boolean }) {
  // Use it with the use hook for reactive updates
  const todos = store.use(store.selector('filteredTodos', showCompleted));

  return (
    <ul>
      {todos.map((todo) => (
        <li key={todo.id}>{todo.text}</li>
      ))}
    </ul>
  );
}

function TodoStats() {
  // Both will trigger re-renders when their values change
  const completedTodos = store.use(store.selector('filteredTodos', true));
  const total = store.use(store.selector('totalTodos'));

  return (
    <div>
      <p>Total: {total}</p>
      <p>Completed: {completedTodos.length}</p>
    </div>
  );
}
```

## Outside Components (get)

Use the `get` method with selectors for non-reactive state access:

```tsx
function handleTodoAction() {
  // Get current values synchronously
  const completedTodos = store.get(store.selector('filteredTodos', true));
  const total = store.get(store.selector('totalTodos'));

  console.log(`${completedTodos.length} of ${total} todos completed`);
}

// Can be used in async functions
async function processTodos() {
  const todos = store.get(store.selector('filteredTodos', true));

  await saveTodos(todos);
}
```

## Type Safety

The `selector` method is fully type-safe. TypeScript will ensure that:

- The selector key exists in your store's selectors
- The parameter type matches the selector's expected parameter type
- The return type matches the selector's defined return type

```tsx
// TypeScript will catch these errors:
store.selector('nonexistentSelector'); // Error: Selector doesn't exist
store.selector('filteredTodos', 123); // Error: Expected boolean | undefined
```
