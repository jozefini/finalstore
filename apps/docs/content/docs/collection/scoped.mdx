---
title: Scoped Collections
---

Scoped collections provide component-level collection management through a Provider/Consumer pattern. This allows you to create isolated collection instances for specific components or features.

```tsx
import { createScopedCollection } from 'finalstore';

const todoList = createScopedCollection({
  states: {
    text: '',
    completed: false
  },
  actions: {
    toggle: (state) => {
      state.completed = !state.completed;
    },
    setText: (state, text: string) => {
      state.text = text;
    }
  }
});

function TodoList() {
  return (
    <todoList.Provider>
      <AddTodo />
      <TodoItems />
    </todoList.Provider>
  );
}

function AddTodo() {
  const collection = todoList.useStore();
  const size = collection.useSize();

  return (
    <button
      onClick={() => {
        collection.insert(`todo-${size + 1}`, {
          text: 'New Todo',
          completed: false
        });
      }}
    >
      Add Todo
    </button>
  );
}

function TodoItems() {
  const collection = todoList.useStore();
  const todoIds = collection.useKeys();

  return (
    <ul>
      {todoIds.map((id) => (
        <TodoItem key={id} id={id} />
      ))}
    </ul>
  );
}

function TodoItem({ id }: { id: string }) {
  const collection = todoList.useStore();
  const todo = collection.use(id);

  if (!todo) return null;

  return (
    <li>
      <input
        type="checkbox"
        checked={todo.completed}
        onChange={() => collection.dispatch(id, 'toggle')}
      />
      <span>{todo.text}</span>
    </li>
  );
}
```
